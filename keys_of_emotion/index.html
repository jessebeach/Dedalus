<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>DedalusWeb Story</title>

    <script src="../src/html/plugins/doT.min.js"></script>
    <script src="../src/html/plugins/jquery.min.js"></script>
    <script src="../src/dedalus.js"></script>
    <script src="../src/dedalus-web.js"></script>

    <link rel="stylesheet" href="../src/html/themes/plain/story.css">

 </head>
<body>
    <div id="story">

        <initscript>
        </initscript>

        <beforeEveryThing>
        </beforeEveryThing>

        <beforeEveryPageTurn>
        </beforeEveryPageTurn>

        <beforeEveryParagraphShown>
        </beforeEveryParagraphShown>

        <afterEveryThing>
        </afterEveryThing>

        <afterEveryPageTurn>
        </afterEveryPageTurn>

        <afterEveryParagraphShown>
        </afterEveryParagraphShown>

        <!-- Novel -->
        <title>The Five Keys of Emotion</title>

        <!-- Objects -->
        <obj id="dummyObject" inventoryName="An object">
            <action id="Examine">
                Something happens... who knows what?!
            </action>
            <action id="Get">
                <when>!story.isInInventory('dummyObject')</when>
                As you try to get it... It is clear that the inventory works!
                {{ story.putInInventory('dummyObject'); }}
            </action>
        </obj>

        <!-- Characters -->
        <character id="starmarsh">
          <action id="Greet">
            <p>Well met, good traveler.</p>
          </action>
          <action id="Who are you?">
            <p>I am a traveler, like you.</p>
          </action>
        </character>

        <!-- Pages -->
        <page id="intro">
          <p>In a time long before ours, a creature of whimsy decided to hide something precious. It never spoke of what it was, but only of what it was worth. And to hear the creature speak of it, it was worth much.</p>
        </page>

        <page id="start" class="first">
          <p>This is the story your mother told you as a child. She named the creature <i>Starmarsh</i> and used this story to distract you in moments of tantrum. You know this now, a parent yourself, and keenly aware of the whims of children. But Starmarsh faded from your memory as you aged...until today, as you were walking the shortcut through the woods.</p>
          <p>On the trail ahead, you see a small person approach. The person walks right to you, <interact with="starmarsh">blocking your path</interact>.</p>

        </page>

            <p>Quite unsurprisingly, there is even an <interact with="dummyObject">object</interact> lying around.</p>

            <p>Looking around with more attention, you notice <turn to="otherPage">another page</turn></p>

            <paragraph id="dummyParagraph">
                Seiously, What did you expect?
            </paragraph>
        </page>

        <page id="otherPage">
            Plot twist! The story ends abruptly.
            {{ story.endGame(); }}
        </page>

    </div>

    <div id="wrapper">
      <div id="main" role="main">
        <h1 id="title"></h1>
        <div id="host" role="log"></div>
      </div>
      <div id="inventoryHostWrapper" role="complementary">
        <h2>Inventory</h2>
        <div id="inventoryHost"></div>
      </div>
    </div>

    <div id="footer" role="navigation">
      <h2>Controls</h2>
      <ul>
        <li><a id="undoHost" href="#">Undo</a></li>
        <li><a id="saveHost" href="#">Save</a></li>
        <li><a id="restoreHost" href="#">Restore</a></li>
        <li><a id="reseteHost" href="#">Reset</a></li>
      </ul>
    </div>

    <div id="interactionHost"></div>

    <div id="undoStageHost"></div>

    <script>
        $(function () {
            new DedalusWeb({
                domSource         : $('#story'),
                domTarget         : $('#host'),
                titleTarget       : $('#title'),
                inventoryTarget   : $('#inventoryHost'),
                interactionTarget : $('#interactionHost'),
                undoTarget        : $('#undoHost'),
                undoStageTarget   : $('#undoStageHost'),
                saveTarget        : $('#saveHost'),
                restoreTarget     : $('#restoreHost'),
                resetTarget       : $('#reseteHost'),
            });
        });

    </script>
</body>
</html>
